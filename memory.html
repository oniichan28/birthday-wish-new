<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Lane - Birthday Memories</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;700&display=swap');
        * { box-sizing: border-box; margin:0; padding:0; font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
        body {
            background: linear-gradient(135deg, #ffcee6 0%, #ffd6f1 50%, #e4f9ff 100%);
            min-height: 100vh; overflow-x:hidden; position:relative;
        }
        .confetti { position:fixed; width:100%; height:100%; z-index:-1; pointer-events:none; }
        .confetti-piece { position:absolute; width:10px; height:10px; background:#ffd1f9; top:-20px; opacity:0; }
        .scrapbook-bg { position:fixed; top:0; left:0; width:100%; height:100%; background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ff9eda' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E"); opacity:0.7; z-index:-1; }
        .memory-lane-container { max-width:1200px; margin:0 auto; padding:2rem; }
        .header { text-align:center; margin-bottom:2.5rem; animation:float 3s ease-in-out infinite; }
        .header h1 { font-size:3rem; color:#ff4e91; font-family:'Pacifico', cursive; text-shadow:3px 3px 0 rgba(255,165,213,0.5); }
        .header p { font-size:1.05rem; color:#8858a3; max-width:800px; margin:0 auto; line-height:1.6; background: rgba(255,255,255,0.55); padding:1rem; border-radius:16px; }
        .slideshow-controls { display:flex; justify-content:center; gap:.7rem; margin-bottom:1.5rem; opacity:0; animation:fadeIn 1s forwards 0.8s; }
        .btn { padding:.7rem 1.2rem; background:linear-gradient(45deg,#ff6ec4,#7873f5); color:white; border:none; border-radius:25px; cursor:pointer; font-size:1rem; display:inline-flex; align-items:center; gap:.5rem; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
        .btn:active{ transform:translateY(1px); }
        .gallery-container { position:relative; margin:1rem 0; }
        .gallery { display:flex; gap:1.2rem; padding:1rem; overflow-x:auto; scroll-behavior:smooth; -webkit-overflow-scrolling:touch; scrollbar-width:thin; scrollbar-color:#ff6ec4 #ffdce9; }
        .gallery::-webkit-scrollbar{ height:8px; }
        .gallery::-webkit-scrollbar-track{ background:#ffdce9; border-radius:10px; }
        .gallery::-webkit-scrollbar-thumb{ background:#ff6ec4; border-radius:10px; }
        .memory-card { flex:0 0 auto; width:300px; height:400px; position:relative; border-radius:18px; overflow:hidden; box-shadow:0 10px 25px rgba(255,105,180,0.18); border:8px solid white; transform:translateY(40px) rotate(var(--rotate,0deg)); opacity:0; transition:all .8s cubic-bezier(.175,.885,.32,1.275); }
        .memory-card.visible{ transform:translateY(0) rotate(var(--rotate,0deg)); opacity:1; }
        .memory-img { width:100%; height:100%; object-fit:cover; transform:scale(1); transition:transform .5s ease; display:block; filter:blur(6px); opacity:0; transition: filter .6s ease, opacity .6s ease, transform .6s ease; }
        .memory-img.loaded{ filter:blur(0); opacity:1; }
        .memory-card:hover .memory-img{ transform:scale(1.08); }
        .memory-caption { position:absolute; bottom:-100%; left:0; width:100%; background:rgba(255,105,180,0.88); color:white; padding:1rem; transition:bottom .35s cubic-bezier(.68,-.55,.27,1.55); font-size:1.05rem; border-bottom-left-radius:12px; border-bottom-right-radius:12px; }
        .memory-card:hover .memory-caption{ bottom:0; }
        .card-tape { position:absolute; width:100px; height:34px; background:rgba(255,255,255,0.85); top:-14px; left:50%; transform:translateX(-50%) rotate(var(--rotate,2deg)); z-index:2; box-shadow:0 0 10px rgba(255,20,147,0.12); }
        .card-sticker{ position:absolute; width:40px; height:40px; z-index:3; bottom:10px; right:10px; transform:rotate(12deg); }
        .navigation-buttons{ display:flex; justify-content:space-between; margin-top:2.6rem; gap:1rem; }
        #nextButton{ background:linear-gradient(45deg,#ff4e91,#ff9a8b); padding:1rem 1.6rem; animation:pulse 2s infinite; position:relative; overflow:hidden; }
        #nextButton::before{ content:""; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:rgba(255,255,255,0.12); transform:rotate(45deg); animation:shine 3s infinite; }
        #backButton{ background:linear-gradient(45deg,#a485ff,#75c6ff); }
        .sticker{ position:absolute; width:60px; height:60px; z-index:5; pointer-events:none; }
        .sticker1{ top:10%; left:5%; }
        .sticker2{ bottom:15%; right:5%; }
        .sticker3{ bottom:30%; left:10%; }
        .sticker4{ top:20%; right:10%; }
        .balloon{ position:fixed; width:60px; height:70px; background:radial-gradient(circle at 30% 30%, #ff7eb9, #ff1493); border-radius:50%; z-index:-1; }
        @keyframes floatUp { 0%{ transform:translateY(100vh) rotate(0); opacity:1 } 100%{ transform:translateY(-100vh) rotate(360deg); opacity:0 } }
        @keyframes float { 0%,100%{ transform:translateY(0) rotate(0) } 50%{ transform:translateY(-10px) rotate(4deg) } }
        @keyframes pulse { 0%{ transform:scale(1)} 50%{ transform:scale(1.03)} 100%{ transform:scale(1)} }
        @keyframes shine { 0%{ left:-100%; opacity:0 } 20%{ left:100%; opacity:0.6 } 100%{ left:100%; opacity:0 } }
        @media (max-width:768px){ .header h1{ font-size:2.4rem } .memory-card{ width:250px; height:340px } .sticker{ width:45px; height:45px } }
        @media (max-width:480px){ .header h1{ font-size:2rem } .header p{ font-size:0.98rem } .memory-card{ width:220px; height:300px } .navigation-buttons{ flex-direction:column; align-items:center } .btn{ width:100%; max-width:240px } }
        /* Fade-in class for slide active (for accessibility/control if needed) */
        .slide { opacity:0; transition:opacity .6s ease-in-out; }
        .slide.active { opacity:1; }
        .visually-hidden{ position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap }
    </style>
</head>
<body>
    <div class="scrapbook-bg"></div>
    <div class="confetti" id="confetti-container"></div>

    <!-- Balloons -->
    <div class="balloon" style="left:10%; animation-duration:18s;"></div>
    <div class="balloon" style="left:20%; animation-duration:15s; animation-delay:2s;"></div>
    <div class="balloon" style="left:70%; animation-duration:20s; animation-delay:5s;"></div>
    <div class="balloon" style="left:85%; animation-duration:17s; animation-delay:1s;"></div>
    <div class="balloon" style="left:40%; animation-duration:22s; animation-delay:7s;"></div>

    <!-- Decorative Stickers -->
    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23ff6ec4' /%3E%3Ctext x='50' y='65' font-family='Arial' font-size='40' text-anchor='middle' fill='white'%3E‚ú®%3C/text%3E%3C/svg%3E" class="sticker sticker1" alt="Decorative sticker">
    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23a485ff' /%3E%3Ctext x='50' y='65' font-family='Arial' font-size='40' text-anchor='middle' fill='white'%3E‚ô•%3C/text%3E%3C/svg%3E" class="sticker sticker2" alt="Decorative sticker">
    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23ff4e91' /%3E%3Ctext x='50' y='65' font-family='Arial' font-size='40' text-anchor='middle' fill='white'%3E‚òÖ%3C/text%3E%3C/svg%3E" class="sticker sticker3" alt="Decorative sticker">
    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23c175ff' d='M50 0 L75 25 L100 0 L75 50 L100 100 L50 75 L0 100 L25 50 L0 0 L25 25 Z' /%3E%3C/svg%3E" class="sticker sticker4" alt="Decorative sticker">

    <div class="memory-lane-container">
        <div class="header">
            <h1>Our Memory Lane</h1>
            <p>A journey through the most incredible moments we've shared together. Hover over each photo to see why these memories mean so much to me! ‚ú®üíñ</p>
        </div>

        <div class="slideshow-controls">
            <button id="startSlideshow" class="btn" aria-pressed="false">‚ñ∂ Start Slideshow</button>
            <button id="pauseSlideshow" class="btn" style="display:none;" aria-pressed="true">‚è∏ Pause Slideshow</button>
        </div>

        <div class="gallery-container">
            <div class="gallery" id="memoryGallery" tabindex="0" aria-label="Memory gallery">
                <!-- Images will be dynamically loaded here from JavaScript -->
            </div>
        </div>

        <div class="navigation-buttons">
            <button id="backButton" class="btn">‚Üê Back to Welcome</button>
            <button id="nextButton" class="btn">‚ú® Next Surprise! ‚ú®</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        const memories = [
            { image: "https://i.ibb.co.com/hxVVtz4S/handholding0.jpg", caption: "‡ßß‡ß≠ ‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞ | ‡¶ï‡¶§‡¶á ‡¶®‡¶æ ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶õ‡¶ø‡¶≤ ‡¶∏‡ßá‡¶á ‡¶¶‡¶ø‡¶® ‡¶ü‡¶ø | ‡¶∏‡ßá‡¶á ‡¶Æ‡ßá‡¶ò‡¶≤‡¶æ ‡¶Ü‡¶ï‡¶æ‡¶∂, ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá‡¶∞ ‡¶õ‡ßã‡¶ü ‡¶®‡¶¶‡ßÄ | ‡¶Ü‡¶∞ ‡¶ú‡¶®-‡ßç‡¶Æ‡¶æ‡¶®‡¶¨‡¶π‡ßÄ‡¶® ‡¶∞‡¶Æ‡¶£‡¶æ.!", isGif:false, rotationAngle:-2, emoji:"üåä" },
            { image: "https://i.ibb.co.com/84S3363z/handholding1.png", caption: "‡ßØ‡¶á ‡¶ú‡ßÅ‡¶®‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶à‡¶¶ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶õ‡¶ø‡¶≤‡ßã‡•§ ‡•§ ", isGif:false, rotationAngle:3, emoji:"üåÖ" },
            { image: "https://i.ibb.co.com/DD1HFv9t/handholding3.jpg", caption: "‡ß®‡ßÆ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø ‡•§ ‡¶è‡¶á‡¶¶‡¶ø‡¶® ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶Ü‡¶Ç‡¶ü‡¶ø ‡¶ü‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∂‡ßã - ‡¶Ö‡¶´ ‡¶ï‡¶∞‡¶õ‡¶ø‡¶≤‡ßá‡¶® ‡•§", isGif:true, rotationAngle:-1, emoji:"üöó" },
            { image: "https://i.ibb.co.com/zWx5znj5/handholding5.jpg", caption: "‡ß®‡ß¶ ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø ‡•§ ‡¶è‡¶á‡¶¶‡¶ø‡¶® ‡¶Ü‡¶Æ‡¶ø ‡¶™‡¶ø‡¶ï ‡¶§‡ßÅ‡¶≤‡¶¨‡ßã ‡¶®‡¶æ ‡¶¨‡¶≤‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ì ‡¶™‡¶ø‡¶ï ‡¶®‡¶æ ‡¶§‡ßÅ‡¶≤‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶¶‡¶ø‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§ ‡¶™‡¶∞‡ßá ‡¶è‡¶á ‡¶ï‡¶∞‡ßç‡¶®‡¶æ‡¶∞‡ßá ‡¶è‡¶®‡ßá ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó‡ßá ‡¶™‡¶ø‡¶ï ‡¶ü‡¶æ ‡¶§‡ßÅ‡¶≤‡¶æ‡¶á‡¶õ‡¶ø‡¶≤‡ßá‡¶® ‡¶Ü‡¶Æ‡¶æ‡¶∞‡ßá ‡¶¶‡¶ø‡ßü‡ßá‡•§", isGif:false, rotationAngle:2, emoji:"üçï" },
            { image: "https://i.ibb.co.com/3m3Zc8gT/ring.jpg", caption: "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Æ‡ßá‡¶ö‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶Ç ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶®", isGif:false, rotationAngle:-3, emoji:"üèïÔ∏è" },
            { image: "https://i.ibb.co.com/zVb6CC7R/tea.jpg", caption: "‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶´‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü ‡¶ö‡¶æ- ‡¶°‡ßá‡¶ü ‡¶õ‡¶ø‡¶≤‡ßã‡•§", isGif:true, rotationAngle:1, emoji:"üéµ" },
            { image: "https://i.ibb.co.com/wZM5T4jd/handholding6.jpg", caption: "‡¶â‡¶Æ,‡¶Æ ‡¶Æ‡¶®‡ßá ‡¶™‡ßú‡¶§‡ßá‡¶õ‡ßá ‡¶®‡¶æ ‡¶ï‡¶¨‡ßá‡¶∞ ‡¶è‡¶ü‡¶æ‡•§", isGif:false, rotationAngle:-2, emoji:"üè∞" },
            { image: "https://i.ibb.co.com/pvwRqnM8/handholding8.jpg.jpg", caption: "‡¶è‡¶á‡¶ü‡¶æ ‡¶Æ‡ßá‡¶¨‡¶ø ‡ßß‡ß® ‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡ßü‡¶æ‡¶∞‡¶ø ‡•§‡¶∏‡ßá‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶¶‡¶ø‡¶® ‡¶ü‡¶ø ‡¶õ‡¶ø‡¶≤ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞‡•§ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ï‡¶§‡¶á ‡¶®‡¶æ ‡¶á‡¶®‡¶ú‡ßü ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡¶≤‡¶æ‡¶Æ", isGif:false, rotationAngle:2, emoji:"üèñÔ∏è" },
            { image: "https://i.ibb.co.com/0y9n6sjR/handholding7.jpg", caption: "‡¶≠‡¶æ‡¶á ‡¶è‡¶á ‡¶™‡¶ø‡¶ï ‡¶ü‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶ú‡ßÅ‡¶≤‡ßÅ‡¶Æ ‡¶ï‡¶∞‡ßá ‡¶§‡ßÅ‡¶≤‡¶õ‡¶ø‡¶≤‡ßá‡¶®‡•§ ‡¶™‡¶ø‡¶ï ‡¶§‡ßÅ‡¶≤‡¶¨‡ßã ‡¶®‡¶æ ‡¶¨‡¶≤‡¶õ‡¶ø ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∞‡ßã‡¶°‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡ßá ‡¶ó‡ßá‡¶õ‡¶ø‡¶≤‡ßá‡¶®‡•§", isGif:true, rotationAngle:3, emoji:"üéÇ" }
        ];

        // confetti
        function createConfetti(){
            const container = document.getElementById('confetti-container');
            const colors = ['#ff6ec4','#a485ff','#ff4e91','#c175ff','#75c6ff'];
            for(let i=0;i<90;i++){
                const el = document.createElement('div'); el.className='confetti-piece';
                el.style.left = Math.random()*100 + 'vw';
                el.style.width = (Math.random()*15+5) + 'px';
                el.style.height = (Math.random()*15+5) + 'px';
                el.style.background = colors[Math.floor(Math.random()*colors.length)];
                el.style.borderRadius = Math.random()>0.5? '50%':'0';
                el.style.transform = `rotate(${Math.random()*360}deg)`;
                const duration = Math.random()*3+3; const delay = Math.random()*5;
                el.style.animation = `floatDown ${duration}s ease-in ${delay}s infinite`;
                el.style.opacity = Math.random(); container.appendChild(el);
            }
        }

        document.addEventListener('DOMContentLoaded', ()=>{
            createConfetti();
            const gallery = document.getElementById('memoryGallery');
            const startBtn = document.getElementById('startSlideshow');
            const pauseBtn = document.getElementById('pauseSlideshow');
            const backBtn = document.getElementById('backButton');
            const nextBtn = document.getElementById('nextButton');

            let slideshowInterval = null;
            let currentSlide = 0;

            // Create cards
            memories.forEach((m, idx)=>{
                const card = document.createElement('div'); card.className='memory-card slide';
                card.style.setProperty('--rotate', `${m.rotationAngle}deg`);

                const tape = document.createElement('div'); tape.className='card-tape'; tape.style.setProperty('--rotate', `${m.rotationAngle*2}deg`);

                const img = document.createElement('img'); img.className='memory-img'; img.src = m.image; img.alt = `Memory ${idx+1}`; img.loading='lazy';
                // on load -> remove blur
                img.addEventListener('load', ()=>{ img.classList.add('loaded'); });

                const caption = document.createElement('div'); caption.className='memory-caption'; caption.textContent = m.caption;

                const sticker = document.createElement('div'); sticker.className='card-sticker';
                sticker.innerHTML = `<svg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'><circle cx='50' cy='50' r='50' fill='#ff6ec4' /><text x='50' y='65' font-family='Arial' font-size='40' text-anchor='middle' fill='white'>${m.emoji}</text></svg>`;

                card.appendChild(tape); card.appendChild(img); card.appendChild(caption); card.appendChild(sticker);
                gallery.appendChild(card);
            });

            // Reveal animation via IntersectionObserver
            const observer = new IntersectionObserver((entries)=>{
                entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target); } });
            }, { threshold:0.25 });

            document.querySelectorAll('.memory-card').forEach((c, i)=>{
                observer.observe(c);
                c.style.animationDelay = `${0.08 * i}s`;
                setTimeout(()=> c.classList.add('visible'), 400 + (i*90));
            });

            // Slide helpers: center a card
            function centerCard(index){
                const cards = gallery.querySelectorAll('.memory-card'); if(!cards[index]) return;
                const card = cards[index]; const galleryRect = gallery.getBoundingClientRect();
                gallery.scrollTo({ left: card.offsetLeft - (galleryRect.width/2) + (card.offsetWidth/2), behavior: 'smooth' });
                // mark active class
                cards.forEach(c=> c.classList.remove('active'));
                card.classList.add('active');
            }

            // Auto slideshow - 3000ms (3s)
            function startSlideshow(){
                startBtn.style.display='none'; pauseBtn.style.display='inline-flex';
                if(slideshowInterval) clearInterval(slideshowInterval);
                slideshowInterval = setInterval(()=>{ currentSlide = (currentSlide+1) % memories.length; centerCard(currentSlide); }, 3000);
            }
            function pauseSlideshow(){
                pauseBtn.style.display='none'; startBtn.style.display='inline-flex';
                if(slideshowInterval){ clearInterval(slideshowInterval); slideshowInterval = null; }
            }

            startBtn.addEventListener('click', startSlideshow);
            pauseBtn.addEventListener('click', pauseSlideshow);

            // Navigation buttons
            backBtn.addEventListener('click', ()=>{ window.location.href = 'index.html'; });
            nextBtn.addEventListener('click', ()=>{ window.location.href = 'cake.html'; });

            // Swipe support for mobile
            let touchStartX = 0; let touchEndX = 0; let isPointerDown=false; let pointerStartX=0;

            gallery.addEventListener('touchstart', (e)=>{ touchStartX = e.changedTouches[0].clientX; });
            gallery.addEventListener('touchend', (e)=>{ touchEndX = e.changedTouches[0].clientX; handleSwipe(); });

            // pointer events for desktop dragging (optional)
            gallery.addEventListener('pointerdown', (e)=>{ isPointerDown=true; pointerStartX = e.clientX; gallery.style.cursor='grabbing'; });
            gallery.addEventListener('pointerup', (e)=>{ if(!isPointerDown) return; isPointerDown=false; gallery.style.cursor='auto'; const diff = pointerStartX - e.clientX; if(Math.abs(diff) > 50){ if(diff > 0){ currentSlide = (currentSlide+1) % memories.length; } else { currentSlide = (currentSlide-1+memories.length)%memories.length; } centerCard(currentSlide); } });

            function handleSwipe(){ const diff = touchStartX - touchEndX; if(Math.abs(diff) < 40) return; if(diff > 0){ currentSlide = (currentSlide+1) % memories.length; } else { currentSlide = (currentSlide-1 + memories.length) % memories.length; } centerCard(currentSlide); }

            // keyboard navigation
            gallery.addEventListener('keydown', (e)=>{ if(e.key === 'ArrowRight'){ currentSlide = (currentSlide+1) % memories.length; centerCard(currentSlide); } else if(e.key === 'ArrowLeft'){ currentSlide = (currentSlide-1 + memories.length) % memories.length; centerCard(currentSlide); } });

            // initial center first card after a moment
            setTimeout(()=> centerCard(0), 600);

            // GSAP entrance
            gsap.from('.header', { duration:1, y:-40, opacity:0, ease:'back.out(1.6)'});
            gsap.from('.navigation-buttons', { duration:1, y:30, opacity:0, delay:0.5, ease:'power3.out' });
            gsap.utils.toArray('.sticker').forEach(s=> gsap.to(s, { rotation: 'random(-20,20)', duration: 'random(2,4)', repeat:-1, yoyo:true, ease:'sine.inOut' }));

            // ensure images show nicely if some fail: mark loaded for display fallback
            document.querySelectorAll('.memory-img').forEach(img => { img.addEventListener('error', ()=>{ img.classList.add('loaded'); img.alt = 'Image not found'; img.style.objectFit = 'cover'; img.style.background = '#ffeef8'; }); });

            // auto-scroll to gallery on load
            setTimeout(()=> document.querySelector('.gallery-container').scrollIntoView({ behavior:'smooth', block:'center' }), 900);
        });
    </script>
</body>
</html>
